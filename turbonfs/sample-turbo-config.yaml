#
# NFS mount options
# These have the same name and meaning as Linux NFS client mount options.
# Also note that only a subset of Linux mount options are supported.
#

# valid range: [1, 256]
nconnect: 96

# valid range: [100, 6000]
timeo: 600

# valid range: [1, 100]
retrans: 2

# valid range: [1, 3600]
acregmin: 3
acregmax: 60
acdirmin: 30
acdirmax: 60
actimeo: 300

# valid values: all|none|pos|positive
lookupcache: all

# valid range: [1048576, 3145728]
# also rsize must not be greater than wsize.
rsize: 3145728
wsize: 3145728

# count/maxcount value passed in READDIR/READDIRPLUS RPC requests.
# valid range: [8192, 3145728]
# effective value depends on the server support.
readdir_maxcount: 1048576

#
# Consistency config.
# This controls the consistency level desired wrt updates from other clients.
# Following values are supported (from lowest to highest consistency):
# - solowriter
#   Use this when this fuse client is the only one accessing the share or all
#   other clients have mounted the share readonly, and hence it's guaranteed that
#   file/dirs cannot be updated outside our knowledge. This implies we can cache
#   attributes and data indefinitely and local changes will correctly update the
#   caches.
#   actimeo config will be ignored and set to "infinite" value.
#   Beware, if you wrongly choose this when there are other clients actually
#   making changes to the share (creating/deleting files/dirs) those changes may
#   not reflect for indefinitely long period.
#
# - standardnfs
#   Use this to get the same consistency as standard NFS, which is close-to-open
#   consistency with fresh attributes queried every actimeo period. actimeo
#   config will be honoured.
#   Files/directories are assumed to not have changed till actimeo after which
#   we make a GETATTR call to query the attributes based on which we decide if
#   the file/dir cache needs to be invalidated.
#   Hence any changes done by other clients will be reflected no later than
#   actimeo period.
#   Other non-NFS protocol clients may not see changes to files made by this
#   fuse client till the file is closed.
#
# - azurempa (Multi Protocol Access)
#   This is same as "standard" with one difference - non-NFS protocol clients
#   will see changes to files made by this fuse client more promptly.
#   Use this if you want to access files updated by this client, from other
#   non-NFS protocols.
#
# valid values: solowriter and standardnfs, for now.
#
consistency: solowriter

#
# Cache config
#
# We cache the following:
# - file/dir attributes
# - lookup results
# - readdir data
# - file data
#
# attributes are cached in the kernel and/or user and can be controlled by the
# following mount options:
# - acregmin/acregmax
# - acdirmin/acdirmax
# - actimeo
# - lookupcache
#
# Attribute caching can be effectively disabled by setting actimeo to 0.
#
# Readdir data can be cached in the kernel and user caches.
# User cache is always enabled.
# kernel cache can be controlled using cache.readdir.kernel.enable config.
#
# File data can be cached in the kernel and/or user caches.
# User cache is always enabled, it can be memory and/or file backed (file
# backed cache is currently not supported).
# kernel cache can be controlled using cache.data.kernel.enable config.
# Memory backed caches are controlled using cache.data.* configs, while
# file backed cache are controlled using filecache.* configs.
#
# If your workload is primarily large files read/write then kernel data cache
# (cache.data.kernel.enable) should not be enabled and data cache should be
# enabled. For small file, small IO workloads you may get better performance
# with kernel cache enabled.
#
# Readahead is automatically scaled (up and down) based on the available cache
# and whether there are ongoing writes competing for the cache. readahead_kb
# is the initial value which is the scaled appropriately. It can be set to 0
# for disabling readaheads completely.
# For most cases you don't need to specify readahead_kb explicitly.
#
# cache.data.user.max_size_mb can be expressed as a percentage or an absolute
# value expressed in MiB. Percentage is of the total RAM in the system. It can
# be expressed as e.g., "80%.
# If not specified the default cache size is 60% of the total RAM but capped
# at 16GB.
#
#readahead_kb: 16384
cache.attr.user.enable: true
cache.readdir.kernel.enable: true
cache.data.kernel.enable: false
#cache.data.user.max_size_mb: "60%"
#cache.data.user.max_size_mb: 4096

#
# aznfsclient will disable (to be precise, resist) OOM killing as it's an
# important process and killing it may cause data loss. If you don't want
# aznfsclient to do that, set this to false.
#
oom_kill_disable: true
